<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>async await</title>
</head>
<body>

    <h2>Love babber async await</h2>

    <!-- It provides a synchrounous behaviour to asynchronous code 
    using async-await keyword. -->

    <!-- <script>
        async function getData(){
            setTimeout (function() {
            console.log("I am inside at Timeout block");
        },3000);
    }
    getData();
    </script> -->

    <!-- <script>

        //scenario:
        //prepare url / api endpoint -> sync
        //await // fetch data -> network call -> async
        //process data -> async

        async function getData(){

            //get request - async
            // we can add await keyword only where asynchronous code is present
            let response = await fetch('https://jsonplaceholder.typicode.com/todos/2');
            
            // parse json - async
            let data = await response.json();
            console.log(data);
            }

            getData();
    </script> -->

    <script>

        // post and get call 

        const myHeaders = new Headers();
        myHeaders.append("Content-Type", "application/json");

        const url ='https://jsonplaceholder.typicode.com/posts';

        const options = {
            method: "POST",
            body: JSON.stringify({ username: "love babber"}),
            headers: myHeaders,
        };

        async function getData() {
            const response = await fetch(url);
            let data = await response.json();
            console.log("get data response: ", data);
        }

        async function postData() {
            const response = await fetch(url, options);
            let data = await response.json();
            console.log("post data response: ",data);            
        }

        async function processData() {
            await postData();
            await getData();
        }

        processData();

    </script>
    
</body>
</html>